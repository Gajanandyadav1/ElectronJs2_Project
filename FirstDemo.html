 

<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chat App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style.css">
  <style>
    ::-webkit-scrollbar {
    display: none;
}
    body {
      font-family: sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 0;
    }
    .container10 {
      max-width:1000px;
      margin: 30px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .chat-box {
      padding: 20px;
      /* max-height: 400px; */
      overflow-y: auto;
    }
    .controls {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ddd;
    }
    .controls input[type="text"] {
      flex: 1;
      padding: 10px;
      margin: 0 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .controls button {
      background: #ffffff;
      border: none;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .message-block {
      display: flex;
      margin-bottom: 15px;
      align-items: flex-start;
    }
    .message-block.left {
      flex-direction: row;
    }
    .message-block.right {
      flex-direction: row-reverse;
    }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 10px;
    }
    .text-message, .audio-block {
      background: #e9ecef;
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 60%;
      word-wrap: break-word;
    }
    .message-block.right .text-message,
    .message-block.right .audio-block {
      background: #d1e7dd;
    }


  
      .tabs { display: flex; background: #f1f1f1; color: #000000; border-bottom: 1px solid red; }
      .tab { padding: 10px 30px 10px 10px; cursor: pointer;  }
      .tab.active { border-bottom: 1px solid #8a57ff; color: #8a57ff; font-weight: 500;    }
      .tab-content { padding: 20px; display: none; }
      .tab-content.active { display: block; }
     
  .box {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  .toolbar button {
    margin-right: 10px;
    font-weight: bold;
  }

  #inputEditor {
    height: 120px;
    border: 1px solid #ced4da;
    border-radius: .375rem;
    padding: 10px;
    outline: none;
  }

  textarea {
    resize: none;
  }

  .btn-primary {
    width: 100%;
    border-radius: 10px;
  }

  .section {
    margin-top: 20px;
  }





  ::-webkit-scrollbar {
    display: none;
}
   
    .container10 {
      max-width:1000px;
      margin: 20px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .chat-box {
      padding: 20px;
      /* max-height: 400px; */
      overflow-y: auto;
    }
    .controls {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ddd;
    }
    .controls input[type="text"] {
      flex: 1;
      padding: 10px;
      margin: 0 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .controls button {
      background: #ffffff;
      border: none;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .message-block {
      display: flex;
      margin-bottom: 15px;
      align-items: flex-start;
    }
    .message-block.left {
      flex-direction: row;
    }
    .message-block.right {
      flex-direction: row-reverse;
    }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 10px;
    }
    .text-message, .audio-block {
      background: #e9ecef;
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 60%;
      word-wrap: break-word;
    }
    .message-block.right .text-message,
    .message-block.right .audio-block {
      background: #d1e7dd;
    }
  
  </style>
</head>
<body>




  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"> </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">  <img src="images-removebg-preview.png" class="me-2"  style="width: 22px;  "> Text to Text</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="FirstDemo.html"><i class="fa-solid fa-microphone mx-2"></i> Audio to Text</a>
          </li>
       
          <li class="nav-item">
            <a class="nav-link" href="Second.html"> <img src="download.png" class="me-2"  style="width: 25px;  ">Google Meet</a>
          </li>
       
          
        </ul>
        
      </div>
    </div>
  </nav>




  <div class="container10">
    <div id="chat" class="chat-box" style="height: 75vh;"></div>

    <div class="controls">
      <input type="file" id="audioInput" accept="audio/*" hidden />
      <button onclick="document.getElementById('audioInput').click()"><img src="92-document-upload.gif"  style="width: 30px;"></button>
      <button id="micBtn">üé§</button>
      <input type="text" id="userInput" placeholder="Type message..." />
      <button id="sendBtn">‚û§</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById("chat");
    const audioInput = document.getElementById("audioInput");
    const micBtn = document.getElementById("micBtn");
    const sendBtn = document.getElementById("sendBtn");
    const userInput = document.getElementById("userInput");
    
   let recordingMessageRef = null;
  
   sendBtn.addEventListener("click", () => {
     const text = userInput.value.trim();
     if (text) {
       appendTextMessage(text, "user");
       userInput.value = "";
     }
   });
  
   audioInput.addEventListener("change", async (e) => {
     const file = e.target.files[0];
     if (!file || !file.type.startsWith("audio/")) {
       alert("Please upload a valid audio file.");
       return;
     }
     
     const audioBlobUrl = URL.createObjectURL(file);
     appendAudioMessage(audioBlobUrl, "user");
     appendTextMessage("Transcribing...", "bot");
     
     const wavFile = await convertToWav(file);
     const responseText = await sendToAPI(wavFile);
     updateLastBotMessage(responseText);
   });
  
   let mediaRecorder;
   let audioChunks = [];
   
   micBtn.addEventListener("mousedown", async () => {
     try {
       const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
       mediaRecorder = new MediaRecorder(stream);
       audioChunks = [];
       
       micBtn.style.backgroundColor = "red";
  
       mediaRecorder.ondataavailable = (e) => {
         if (e.data.size > 0) {
           audioChunks.push(e.data);
         }
       };
  
       mediaRecorder.onstop = async () => {
         micBtn.style.backgroundColor = "";
  
         const audioBlob = new Blob(audioChunks, { type: "audio/webm" });
         const audioUrl = URL.createObjectURL(audioBlob);
         appendAudioMessage(audioUrl, "user");
  
         if (recordingMessageRef) recordingMessageRef.remove();
         appendTextMessage("Transcribing...", "bot");
  
         const wavBlob = await convertToWavBlob(audioBlob);
         const wavFile = new File([wavBlob], "mic_input.wav", { type: "audio/wav" });
  
         const responseText = await sendToAPI(wavFile);
         updateLastBotMessage(responseText);
       };
  
       mediaRecorder.start();
       recordingMessageRef = appendTextMessage("Recording...", "user");
     } catch (err) {
       console.error("Mic access denied:", err);
     }
   });
   
   micBtn.addEventListener("mouseup", () => {
     if (mediaRecorder && mediaRecorder.state === "recording") {
       mediaRecorder.stop();
     }
   });
  
   function appendAudioMessage(audioUrl, sender) {
     const wrapper = document.createElement("div");
     wrapper.className = "message-block " + (sender === "user" ? "left" : "right");
     
     const avatar = document.createElement("img");
     avatar.className = "avatar";
     avatar.src = sender === "user" ? "gajju.jpg" : "gajju.jpg"; // üîÅ Replace with actual image paths
     
     const audioDiv = document.createElement("div");
     audioDiv.className = "audio-block";
     audioDiv.innerHTML = `
       <audio controls>
         <source src="${audioUrl}" type="audio/wav">
         Your browser does not support the audio element.
       </audio>
     `;
  
     wrapper.appendChild(avatar);
     wrapper.appendChild(audioDiv);
     chatBox.appendChild(wrapper);
   }
  
   function appendTextMessage(text, sender) {
     const wrapper = document.createElement("div");
     wrapper.className = "message-block " + (sender === "user" ? "left" : "right");
     
     const avatar = document.createElement("img");
     avatar.className = "avatar";
     avatar.src = sender === "user" ? "gajju.jpg" : "gajju.jpg"; // üîÅ Replace with actual image paths
     
     const textDiv = document.createElement("div");
     textDiv.className = "text-message";
     textDiv.textContent = text;
  
     wrapper.appendChild(avatar);
     wrapper.appendChild(textDiv);
     chatBox.appendChild(wrapper);
     chatBox.scrollTop = chatBox.scrollHeight;
  
     return wrapper;
   }
  
   function updateLastBotMessage(newText) {
     const messages = document.querySelectorAll(".message-block.left .text-message");
     if (messages.length > 0) {
       messages[messages.length - 1].textContent = newText;
     }
   }
  
   async function convertToWav(file) {
     return new Promise((resolve, reject) => {
       const context = new AudioContext();
       const reader = new FileReader();
  
       reader.onload = async () => {
         try {
           const arrayBuffer = reader.result;
           const audioBuffer = await context.decodeAudioData(arrayBuffer);
           const wav = encodeWav(audioBuffer);
           const blob = new Blob([wav], { type: "audio/wav" });
           resolve(new File([blob], "converted.wav", { type: "audio/wav" }));
         } catch (e) {
           reject(e);
         }
       };
  
       reader.readAsArrayBuffer(file);
     });
   }
  
   async function convertToWavBlob(blob) {
     const arrayBuffer = await blob.arrayBuffer();
     const audioContext = new AudioContext();
     const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
     const wav = encodeWav(audioBuffer);
     return new Blob([wav], { type: "audio/wav" });
   }
  
   function encodeWav(audioBuffer) {
     const numChannels = audioBuffer.numberOfChannels;
     const sampleRate = audioBuffer.sampleRate;
     const length = audioBuffer.length * numChannels * 2 + 44;
     const buffer = new ArrayBuffer(length);
     const view = new DataView(buffer);
  
     const writeString = (view, offset, str) => {
       for (let i = 0; i < str.length; i++) {
         view.setUint8(offset + i, str.charCodeAt(i));
       }
     };
  
     writeString(view, 0, "RIFF");
     view.setUint32(4, length - 8, true);
     writeString(view, 8, "WAVE");
     writeString(view, 12, "fmt ");
     view.setUint32(16, 16, true);
     view.setUint16(20, 1, true);
     view.setUint16(22, numChannels, true);
     view.setUint32(24, sampleRate, true);
     view.setUint32(28, sampleRate * numChannels * 2, true);
     view.setUint16(32, numChannels * 2, true);
     view.setUint16(34, 16, true);
     writeString(view, 36, "data");
     view.setUint32(40, length - 44, true);
     
     let offset = 44;
     for (let i = 0; i < audioBuffer.length; i++) {
       for (let ch = 0; ch < numChannels; ch++) {
         const sample = Math.max(-1, Math.min(1, audioBuffer.getChannelData(ch)[i]));
         view.setInt16(offset, sample < 0 ? sample * 0x8000 : sample * 0x7FFF, true);
         offset += 2;
       }
     }
     
     return buffer;
   }
   
   async function sendToAPI(file) {
     const formData = new FormData();
     formData.append("file", file);
  
     try {
       const res = await fetch("http://98.70.11.123:3045/transcribe", {
         method: "POST",
         body: formData
       });
       const data = await res.json();
       return data.transcription || "No transcription received.";
     } catch (err) {
       console.error(err);
       return "Error transcribing audio.";
     }
   }
  </script> 





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html> -->



<!-- <!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="content-security-policy" content="script-src 'self' 'unsafe-inline'" />
    <title>Screen + Audio Recorder</title>
  </head>
  <body>
    <h2>Screen & Audio Recorder</h2>
    <button id="startButton">Start Recording</button>
    <button id="stopButton">Stop Recording</button>
    <br><br>
    <video width="640" height="360" autoplay muted></video>
    <br>
    <audio id="audioPlayer" controls></audio>

    <script src="renderer.js"></script>
  </body>
</html> -->


<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="content-security-policy" content="script-src 'self' 'unsafe-inline'" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Screen + Audio Recorder</title>
    <style> 
      .tabs { display: flex; background: #f1f1f1; color: #000000; border-bottom: 1px solid red; }
      .tab { padding: 10px 30px 10px 10px; cursor: pointer;  }
      .tab.active { border-bottom: 1px solid #8a57ff; color: #8a57ff; font-weight: 500;    }
      .tab-content { padding: 20px; display: none; }
      .tab-content.active { display: block; }
     
  .box {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  .toolbar button {
    margin-right: 10px;
    font-weight: bold;
  }

  #inputEditor {
    height: 120px;
    border: 1px solid #ced4da;
    border-radius: .375rem;
    padding: 10px;
    outline: none;
  }

  textarea {
    resize: none;
  }

  .btn-primary {
    width: 100%;
    border-radius: 10px;
  }

  .section {
    margin-top: 20px;
  }





  ::-webkit-scrollbar {
    display: none;
}
   
    .container10 {
      max-width:1000px;
      margin: 20px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .chat-box {
      padding: 20px;
      /* max-height: 400px; */
      overflow-y: auto;
    }
    .controls {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ddd;
    }
    .controls input[type="text"] {
      flex: 1;
      padding: 10px;
      margin: 0 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .controls button {
      background: #ffffff;
      border: none;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .message-block {
      display: flex;
      margin-bottom: 15px;
      align-items: flex-start;
    }
    .message-block.left {
      flex-direction: row;
    }
    .message-block.right {
      flex-direction: row-reverse;
    }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 10px;
    }
    .text-message, .audio-block {
      background: #e9ecef;
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 60%;
      word-wrap: break-word;
    }
    .message-block.right .text-message,
    .message-block.right .audio-block {
      background: #d1e7dd;
    } 

    .navbar-nav li a{
    padding: 5px 30px !important;
    font-weight: 600 !important;
  }


 
  .navbar-premium {
    background: linear-gradient(90deg, #fdfbfb, #ebedee);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: all 0.4s ease-in-out;
  }

  .navbar-brand {
    font-weight: bold;
    font-size: 22px;
    color: #0d6efd;
    transition: transform 0.3s ease;
  }

  .navbar-brand:hover {
    transform: scale(1.05);
  }

  .nav-link {
    font-weight: 500;
    position: relative;
    transition: all 0.3s ease;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    left: 0;
    top:45px;
    bottom: 0px;
    width: 0%;
    height: 2px;
    background: #0d6efd;
    transition: 0.4s;
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .nav-link:hover {
    color: #0d6efd;
    transform: scale(1.05);
  }

  .nav-icon {
    width: 20px;
    margin-right: 8px;
    vertical-align: middle;
    transition: transform 0.3s;
  }

  .nav-link:hover .nav-icon {
    transform: rotate(10deg) scale(1.1);
  }

  .custom-toggler {
    font-size: 22px;
    background: none;
    border: none;
    color: #000;
    transition: transform 0.3s;
  }

  .custom-toggler:focus {
    outline: none;
    /* transform: rotate(90deg); */
  }
</style>
  </head>
  <body>
 <script>
  function toggleMenu() {
    const menu = document.getElementById('navbarSupportedContent');
    const icon = document.getElementById('menu-icon');
    const isOpen = menu.classList.contains('show');

    if (isOpen) {
      menu.classList.remove('show');
      icon.className = 'fas fa-bars';
    } else {
      menu.classList.add('show');
      icon.className = 'fas fa-times';
    }
  }
</script>

<nav class="navbar navbar-expand-lg navbar-light navbar-premium">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img src="download__3_-removebg-preview (1).png" style="width: 50px;">
    </a>

    <!-- Custom Toggler -->
    <button class="custom-toggler d-lg-none" type="button" onclick="toggleMenu()">
      <i id="menu-icon" class="fas fa-bars"></i>
    </button>

    <!-- Collapse Menu -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent">
      <ul class="navbar-nav text-center">
        <li class="nav-item">
          <a class="nav-link active" href="index.html">
            <img src="images-removebg-preview.png" class="nav-icon"> Text to Text
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="FirstDemo.html">
            <i class="fas fa-microphone nav-icon"></i> Audio to Text
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Second.html">
            <img src="download__1_-removebg-preview (1).png" class="nav-icon"> Google Meet
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>






    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-10 m-auto">

 

          
          
       
      
          <div  >
          <!-- <a href="FirstDemo.html">   <h2>Welcome to Tab 2</h2></a> -->
          <div class="container10">
            <div id="chat" class="chat-box" style="height: 75vh;"></div>
        
            <div class="controls">
              <input type="file" id="audioInput" accept="audio/*" hidden />
              <button onclick="document.getElementById('audioInput').click()"> <img src="92-document-upload.gif" style="width: 30px;"></button>
              <button id="micBtn"><img src="jdvoice_mic.gif" style="width: 16px;"></button>
              <input type="text" id="userInput" placeholder="Type message..." />
              <button id="sendBtn">‚û§</button>
            </div>
          </div>
          
          </div>
        
      
           
 

        </div>
      </div>
    </div>
  




  
    <script>
      const chatBox = document.getElementById("chat");
      const audioInput = document.getElementById("audioInput");
      const micBtn = document.getElementById("micBtn");
      const sendBtn = document.getElementById("sendBtn");
      const userInput = document.getElementById("userInput");
      
     let recordingMessageRef = null;
   
     sendBtn.addEventListener("click", () => {
       const text = userInput.value.trim();
       if (text) {
         appendTextMessage(text, "user");
         userInput.value = "";
       }
     });
   
     audioInput.addEventListener("change", async (e) => {
       const file = e.target.files[0];
       if (!file || !file.type.startsWith("audio/")) {
         alert("Please upload a valid audio file.");
         return;
       }
       
       const audioBlobUrl = URL.createObjectURL(file);
       appendAudioMessage(audioBlobUrl, "user");
       appendTextMessage("Transcribing...", "bot");
       
       const wavFile = await convertToWav(file);
       const responseText = await sendToAPI(wavFile);
       updateLastBotMessage(responseText);
     });
   
     let mediaRecorder;
     let audioChunks = [];
     
     micBtn.addEventListener("mousedown", async () => {
       try {
         const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
         mediaRecorder = new MediaRecorder(stream);
         audioChunks = [];
         
         micBtn.style.backgroundColor = "red";
   
         mediaRecorder.ondataavailable = (e) => {
           if (e.data.size > 0) {
             audioChunks.push(e.data);
           }
         };
   
         mediaRecorder.onstop = async () => {
           micBtn.style.backgroundColor = "";
   
           const audioBlob = new Blob(audioChunks, { type: "audio/webm" });
           const audioUrl = URL.createObjectURL(audioBlob);
           appendAudioMessage(audioUrl, "user");
   
           if (recordingMessageRef) recordingMessageRef.remove();
           appendTextMessage("Transcribing...", "bot");
   
           const wavBlob = await convertToWavBlob(audioBlob);
           const wavFile = new File([wavBlob], "mic_input.wav", { type: "audio/wav" });
   
           const responseText = await sendToAPI(wavFile);
           updateLastBotMessage(responseText);
         };
   
         mediaRecorder.start();
         recordingMessageRef = appendTextMessage("Recording...", "user");
       } catch (err) {
         console.error("Mic access denied:", err);
       }
     });
     
     micBtn.addEventListener("mouseup", () => {
       if (mediaRecorder && mediaRecorder.state === "recording") {
         mediaRecorder.stop();
       }
     });
   
     function appendAudioMessage(audioUrl, sender) {
       const wrapper = document.createElement("div");
       wrapper.className = "message-block " + (sender === "user" ? "right" : "left");
       
       const avatar = document.createElement("img");
       avatar.className = "avatar";
       avatar.src = sender === "user" ? "gajju.jpg" : "gajju.jpg"; // üîÅ Replace with actual image paths
       
       const audioDiv = document.createElement("div");
       audioDiv.className = "audio-block";
       audioDiv.innerHTML = `
         <audio controls>
           <source src="${audioUrl}" type="audio/wav">
           Your browser does not support the audio element.
         </audio>
       `;
   
       wrapper.appendChild(avatar);
       wrapper.appendChild(audioDiv);
       chatBox.appendChild(wrapper);
     }
   
     function appendTextMessage(text, sender) {
       const wrapper = document.createElement("div");
       wrapper.className = "message-block " + (sender === "user" ? "right" : "left");
       
       const avatar = document.createElement("img");
       avatar.className = "avatar";
       avatar.src = sender === "user" ? "gajju.jpg" : "gajju.jpg"; // üîÅ Replace with actual image paths
       
       const textDiv = document.createElement("div");
       textDiv.className = "text-message";
       textDiv.textContent = text;
   
       wrapper.appendChild(avatar);
       wrapper.appendChild(textDiv);
       chatBox.appendChild(wrapper);
       chatBox.scrollTop = chatBox.scrollHeight;
   
       return wrapper;
     }
   
     function updateLastBotMessage(newText) {
       const messages = document.querySelectorAll(".message-block.left .text-message");
       if (messages.length > 0) {
         messages[messages.length - 1].textContent = newText;
       }
     }
   
     async function convertToWav(file) {
       return new Promise((resolve, reject) => {
         const context = new AudioContext();
         const reader = new FileReader();
   
         reader.onload = async () => {
           try {
             const arrayBuffer = reader.result;
             const audioBuffer = await context.decodeAudioData(arrayBuffer);
             const wav = encodeWav(audioBuffer);
             const blob = new Blob([wav], { type: "audio/wav" });
             resolve(new File([blob], "converted.wav", { type: "audio/wav" }));
           } catch (e) {
             reject(e);
           }
         };
   
         reader.readAsArrayBuffer(file);
       });
     }
   
     async function convertToWavBlob(blob) {
       const arrayBuffer = await blob.arrayBuffer();
       const audioContext = new AudioContext();
       const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
       const wav = encodeWav(audioBuffer);
       return new Blob([wav], { type: "audio/wav" });
     }
   
     function encodeWav(audioBuffer) {
       const numChannels = audioBuffer.numberOfChannels;
       const sampleRate = audioBuffer.sampleRate;
       const length = audioBuffer.length * numChannels * 2 + 44;
       const buffer = new ArrayBuffer(length);
       const view = new DataView(buffer);
   
       const writeString = (view, offset, str) => {
         for (let i = 0; i < str.length; i++) {
           view.setUint8(offset + i, str.charCodeAt(i));
         }
       };
   
       writeString(view, 0, "RIFF");
       view.setUint32(4, length - 8, true);
       writeString(view, 8, "WAVE");
       writeString(view, 12, "fmt ");
       view.setUint32(16, 16, true);
       view.setUint16(20, 1, true);
       view.setUint16(22, numChannels, true);
       view.setUint32(24, sampleRate, true);
       view.setUint32(28, sampleRate * numChannels * 2, true);
       view.setUint16(32, numChannels * 2, true);
       view.setUint16(34, 16, true);
       writeString(view, 36, "data");
       view.setUint32(40, length - 44, true);
       
       let offset = 44;
       for (let i = 0; i < audioBuffer.length; i++) {
         for (let ch = 0; ch < numChannels; ch++) {
           const sample = Math.max(-1, Math.min(1, audioBuffer.getChannelData(ch)[i]));
           view.setInt16(offset, sample < 0 ? sample * 0x8000 : sample * 0x7FFF, true);
           offset += 2;
         }
       }
       
       return buffer;
     }
     
     async function sendToAPI(file) {
       const formData = new FormData();
       formData.append("file", file);
   
       try {
         const res = await fetch("http://98.70.11.123:3045/transcribe", {
           method: "POST",
           body: formData
         });
         const data = await res.json();
         return data.transcription || "No transcription received.";
       } catch (err) {
         console.error(err);
         return "Error transcribing audio.";
       }
     }
   </script>  
   
 <script src="renderer.js"></script>
 <script src="Renderer2.js"></script>
 <!-- <script src="Rend5.js"></script>  -->
 <script src="Renderer3.js"></script>
 



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
   






 



 ¬†</body>
</html>

